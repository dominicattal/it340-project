<div class="d-flex text-bg-dark">
  <div class="d-flex flex-column flex-shrink-0 p-3 text-bg-dark vh-100" style="width: 200px;"> 
    <a href="/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none"> <svg
        class="bi pe-none me-2" width="40" height="32" aria-hidden="true">
        <use xlink:href="#bootstrap"></use>
      </svg> <span class="fs-4">Grades</span> </a>
    <hr>
    <ul class="nav nav-pills flex-column mb-auto">
      <li class="nav-item">
        <a href="#" class="nav-link" [class.active]="grade === 'EG'" (click)="$event.preventDefault(); setGrade('EG')" aria-current="page">
          <svg class="bi pe-none me-2" width="16" height="16" aria-hidden="true">
            <use xlink:href="#home"></use>
          </svg>
          Entry Grade ({{ getKitCount('EG') }})
        </a>
      </li>
      <li>
        <a href="#" class="nav-link text-white" [class.active]="grade === 'HG'" (click)="$event.preventDefault(); setGrade('HG')">
          <svg class="bi pe-none me-2" width="16" height="16" aria-hidden="true">
            <use xlink:href="#speedometer2"></use>
          </svg>
          High Grade ({{ getKitCount('HG') }})
        </a>
      </li>
      <li>
        <a href="#" class="nav-link text-white" [class.active]="grade === 'RG'" (click)="$event.preventDefault(); setGrade('RG')">
          <svg class="bi pe-none me-2" width="16" height="16" aria-hidden="true">
            <use xlink:href="#table"></use>
          </svg>
          Real Grade ({{ getKitCount('RG') }})
        </a>
      </li>
      <li>
        <a href="#" class="nav-link text-white" [class.active]="grade === 'MG'" (click)="$event.preventDefault(); setGrade('MG')">
          <svg class="bi pe-none me-2" width="16" height="16" aria-hidden="true">
            <use xlink:href="#grid"></use>
          </svg>
          Master Grade ({{ getKitCount('MG') }})
        </a>
      </li>
      <li>
        <a href="#" class="nav-link text-white" [class.active]="grade === 'PG'" (click)="$event.preventDefault(); setGrade('PG')">
          <svg class="bi pe-none me-2" width="16" height="16" aria-hidden="true">
            <use xlink:href="#people-circle"></use>
          </svg>
          Perfect Grade ({{ getKitCount('PG') }})
        </a>
      </li>
    </ul>

  </div>
  <div class="cards flex-grow-1 p-4 text-bg-dark">
    <h2 class="mb-4">{{ currentGradeName }} Model Kits</h2>
    <div class="row row-cols-1 row-cols-md-4 g-4">
      <!-- Card 1 -->
      @for (model of models; track model) {
      <div class="col">
        <div class="card" (click)="showPriceComparison(model)" style="cursor: pointer;">
          <img [src]="model.img" class="card-img-top">
          <div class="card-body">
            <h5 class="card-title">{{model.name}}</h5>
            <h6 class="card-body text-success">${{model.lowestPrice}} <small class="text-muted">at {{model.lowestStore}}</small></h6>
            <small class="text-muted">{{model.stores.length}} stores available</small>
          </div>
        </div>
      </div>
      }
    </div>

    <!-- Price Comparison Modal -->
    <div class="modal fade" id="priceModal" tabindex="-1" aria-labelledby="priceModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content bg-dark text-white">
          <div class="modal-header">
            <h5 class="modal-title" id="priceModalLabel">{{selectedModel?.name}}</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="row">
              <div class="col-md-4">
                <img [src]="selectedModel?.img" class="img-fluid rounded" alt="Model Image">
              </div>
              <div class="col-md-8">
                <h4 class="text-success mb-3">Best Price: ${{selectedModel?.lowestPrice}} at {{selectedModel?.lowestStore}}</h4>
                <h5>All Available Prices:</h5>
                <div class="list-group">
                  @for (store of selectedModel?.stores; track store; let idx = $index) {
                  <div class="list-group-item list-group-item-action d-flex justify-content-between align-items-center bg-secondary text-white">
                    <a href="{{store.url}}" target="_blank" class="d-flex justify-content-between align-items-center">
                      <div>
                        <strong>{{store.name}}</strong>
                      </div>
                      <span class="badge bg-primary rounded-pill">${{store.price}}</span>
                    </a>
                    <button (click)="bookmarkToggle(store.url, idx)">{{store.bookmarked === true ? 'O' : 'X'}}</button>
                  </div>
                  }
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>